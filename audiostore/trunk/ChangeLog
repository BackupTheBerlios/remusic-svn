2003-11-27  Daniel Larsson  <daniel.larsson@servicefactory.se>

	* remus/audiostore: Removed obsolete files as part of the switch
	from medusa to twisted.
	
	* remus/audiostore/as_collection.py (mk_filename, mk_sqlname):
	Translate from SQL names to "filesystem" names, and vice versa.
	(Collection.select): Support order_by and group_by queries.
	(SearchColl.parse_query): Change semantics of URL queries without
	field specifier to match songs with either title, album name or
	artist name, rather than having to match all three, which is
	rather dumb. Also, it had a syntax error to top it off...

	* remus/audiostore/sidinfo.py: Embryo to supporting SID files in
	the store.

	* remus/database.py (Select.select): Pass along the query to the
	self.tables function, to correctly compute the set of tables
	needed to consult for the given query.

	* remus/webserver/audiostore.py: New file. Wraps an audiostore
	collection as a twisted resource.

	* README: medusa -> twisted

2003-10-21  Daniel Larsson  <daniel.larsson@servicefactory.se>

	* remus/audiostore/as_collection.py: Numerous changes to
	accomodate the changes below.

	(IndexXML, PlaylistColl): New classes which abstracts the creation
	of index.html, playlists, and other similar type of files.
	IndexXML generates an XML file based on the query, and
	PlaylistColl feeds it with an XSLT file to transform to
	appropriate output.  Currently, index.html.xsl and m3u.xsl are
	implemented, but the mechanism is extensible, all that is needed
	is an XSLT file stored in /usr/local/libdata/remus/styles (though,
	there needs to be a way to control the MIME type of the resulting
	file, right now it's hard coded to "text/xml").

	* db/audiostore.xml, db/makepython.xsl, db/makesql.xsl: Building
	SQL and python file from an XML file describing the SQL database
	now.  The generated python file uses the classes introduced below
	to describe the tables.

	* remus/database.py: New file. A set of classes which knows about
	tables, fields and relations. This avoids the adhoc and somewhat
	complex code which tried to make sure only those tables needed
	were used in SELECT statements. The set of tables are calculated
	based on what fields are used, and correct WHERE-clauses are
	inserted based on table relations.

2003-10-01  Daniel Larsson  <daniel.larsson@servicefactory.se>

	* setup.py: Added custom distutil command, so I can create the SQL
	tables on installation. distutils is a fairly complex system, I
	noticed...

	* remus/audiostore/as_collection.py: Added generation of HTML
	pages when "directory" nodes are accessed with a GET request (what
	browsers typically do).  WebDAV clients find out about directories
	and their contents differently, so they aren't affected by this
	(other than if you try to 'cat' a directory, or similar).

	When generating HTML pages, first an XML file is generated from
	the database, which is fed through xsltproc with an XSLT style
	sheet, and the resulting HTML page is sent back.

2003-09-22  Daniel Larsson  <daniel.larsson@servicefactory.se>

	* setup.py: distutils installation / distribution building.

	* audiostore_resync: New tool which regenerates the SQL
	information from the audio files. Mostly useful when changing the
	database structure, or fixing tag parsing.

